# ============================================================================
# Mikrotik Connection Configuration (Required)
# ============================================================================
MIKROTIK_HOST=192.168.88.1
MIKROTIK_PORT=8728
MIKROTIK_USERNAME=admin
MIKROTIK_PASSWORD=your_password_here

# ============================================================================
# Monitoring Configuration
# ============================================================================
# Interface list (comma-separated)
# Specify which interfaces to monitor
INTERFACES=vlan2622,vlan2624

# Uplink interfaces (comma-separated, optional)
# List interfaces that connect to ISP (WAN ports)
# Uplink: TX=Upload, RX=Download (normal understanding)
# Other interfaces (LAN/VLAN): TX=Download (to user), RX=Upload (from user)
# Example: UPLINK_INTERFACES=ether1,sfp1
UPLINK_INTERFACES=

# Real-time statistics window size (seconds, default: 10, max: 60)
# Controls how many seconds of history to keep for average/peak calculations
STATS_WINDOW_SIZE=10

# Debug mode (optional, default: false)
# When enabled, prints the actual Mikrotik API commands being sent
DEBUG=false

# ============================================================================
# Output Features (All Disabled by Default)
# ============================================================================

# --- Terminal Interactive Display ---
# Enable terminal output (default: false)
# Note: Occupies the terminal, not suitable for background services
TERMINAL_ENABLED=false

# Terminal display mode (only when TERMINAL_ENABLED=true)
# - refresh: Refresh mode, like top/htop (default)
# - append: Append mode, like tail -f
TERMINAL_MODE=refresh

# Terminal display units (only when TERMINAL_ENABLED=true)
TERMINAL_RATE_UNIT=auto   # auto, bps (bits/s), Bps (Bytes/s)
TERMINAL_RATE_SCALE=auto  # auto, k, M, G

# --- Structured Logging ---
# Enable structured logging (default: false)
# Suitable for running as a service, outputs to systemd journal or file
# Note: Can be enabled together with TERMINAL_ENABLED if LOG_OUTPUT=file
#       Cannot use LOG_OUTPUT=stdout with TERMINAL_ENABLED (output conflict)
LOG_ENABLED=false

# Log output target (only when LOG_ENABLED=true)
# - stdout: Standard output (default, suitable for systemd)
# - file: Output to file (required if TERMINAL_ENABLED=true)
LOG_OUTPUT=stdout

# Log file path (only when LOG_OUTPUT=file)
LOG_FILE=/var/log/mikrotik-stats.log

# Log format (only when LOG_ENABLED=true)
# - json: JSON format (easy to parse)
# - text: Text format (easy to read)
LOG_FORMAT=text

# Log rate units (only when LOG_ENABLED=true)
LOG_RATE_UNIT=auto
LOG_RATE_SCALE=auto

# --- Web Service ---
# Enable web service (default: false)
WEB_ENABLED=false

# Web service listen address
WEB_LISTEN_ADDR=:8080

# Web service sub-features
WEB_ENABLE_REALTIME=true   # WebSocket real-time push
WEB_ENABLE_API=true        # REST API (query historical data)
WEB_ENABLE_STATIC=true     # Static web pages

# --- VictoriaMetrics Integration ---
# Enable VictoriaMetrics (default: false)
VM_ENABLED=false

# VictoriaMetrics endpoint
VM_URL=http://localhost:8428

# Short-term aggregation configuration (10-second data for detailed queries)
VM_ENABLE_SHORT=true       # Enable short-term aggregation
VM_SHORT_INTERVAL=10       # Aggregation interval (seconds)

# Long-term aggregation configuration (minute-level data for long-term trends)
VM_ENABLE_LONG=true        # Enable long-term aggregation
VM_LONG_INTERVAL=300       # Aggregation interval (seconds, 300=5 minutes)

# VictoriaMetrics connection configuration
VM_TIMEOUT=5               # Request timeout (seconds)
VM_RETRY_COUNT=3           # Retry count on failure

# ============================================================================
# Usage Examples
# ============================================================================

# Example 1: Silent mode (minimal configuration, default behavior)
# MIKROTIK_HOST=192.168.1.1
# MIKROTIK_PORT=8728
# MIKROTIK_USERNAME=admin
# MIKROTIK_PASSWORD=password
# INTERFACES=ether1,ether2
# Result: Runs silently, only essential logs to stderr

# Example 2: Interactive terminal monitoring
# (Same as above, plus:)
# TERMINAL_ENABLED=true
# TERMINAL_MODE=refresh

# Example 3: Run as a service (systemd)
# (Same as Example 1, plus:)
# LOG_ENABLED=true
# LOG_OUTPUT=stdout
# LOG_FORMAT=json

# Example 4: Web real-time monitoring
# (Same as Example 1, plus:)
# WEB_ENABLED=true
# WEB_LISTEN_ADDR=:8080

# Example 5: Terminal display + File logging (dual output)
# (Same as Example 1, plus:)
# TERMINAL_ENABLED=true
# TERMINAL_MODE=refresh
# LOG_ENABLED=true
# LOG_OUTPUT=file
# LOG_FILE=/var/log/mikrotik-stats.log
# Result: Real-time display on screen, structured logs in file

# Example 6: Full feature set (Web + VictoriaMetrics)
# (Same as Example 1, plus:)
# WEB_ENABLED=true
# WEB_LISTEN_ADDR=:8080
# VM_ENABLED=true
# VM_URL=http://localhost:8428
